---
slug: img-backup
title: 树莓派系统备份
authors: [tamochi]
---

树莓派 5 性能强大，常被用于运行 Home Assistant、NAS 或各种复杂的编译任务。一旦系统崩溃或 SD 卡损坏，重头配置将是一场噩梦。

本文将介绍三种最常用的备份方法，从小白到极客都能找到适合自己的方案。

<!-- truncate -->

## 方法一：在线热备份

这是最简单的方法，适合拥有图形化桌面环境（Raspberry Pi OS Desktop）的用户。它的优势在于**不需要关机**，且可以直接将系统克隆到新的 SD 卡或 NVMe SSD 中。

*   **适用场景**：制作备用启动卡、将系统从 SD 卡迁移到 SSD。
*   **准备工具**：一个 USB 读卡器 + 一张空白 SD 卡（或 USB 硬盘/SSD）。

1.  启动树莓派进入桌面。
2.  插入你的目标备份盘（空白卡或硬盘）。
3.  点击左上角菜单：**附件 (Accessories)** -> **SD Card Copier**。
4.  在弹出的窗口中：
    *   **Copy From Device**: 选择 `Internal SD Card`（或其他当前正在运行的系统盘）。
    *   **Copy To Device**: 选择你刚才插入的 USB 设备。
5.  勾选 **New Partition UUIDs**（建议勾选，避免两张卡同时插入时冲突）。
6.  点击 **Start**。

> **注意**：树莓派 5 的 USB 3.0 速度很快，备份速度会比老款快很多。备份完成后，你可以直接拔下旧卡，换上新卡/硬盘启动。

-----

## 方法二：Windows 全盘镜像备份

这种方法会将整张卡“克隆”成电脑上的一个 `.img` 文件。这是最适合**存档**的方法。

*   **适用场景**：想把当前系统状态保存到电脑硬盘里，以防万一。
*   **准备工具**：Windows 电脑、[Win32 Disk Imager](https://sourceforge.net/projects/win32diskimager/)。

1.  **关机**树莓派，取出 SD 卡。
2.  通过读卡器将卡插入电脑。
3.  **⚠️ 关键点：处理弹窗**
    *   Windows 会弹出多个窗口提示“需要格式化”。
    *   **绝对不要点格式化！** 全部点击**“取消”**。
    *   这是因为树莓派的 Linux 分区（ext4）在 Windows 下不可读，属于正常现象。
4.  打开 **Win32 Disk Imager**。
5.  **设置路径**：点击蓝色文件夹图标，选择保存位置，并手动输入文件名（如 `Pi5_Backup.img`）。
6.  **选择设备**：在右侧下拉菜单中，选择那个**能打开的、容量较小（boot）**的盘符。
7.  **开始备份**：点击 **读取 (Read)** 按钮。（**千万别点成“写入”！**）

-----

## 解决备份文件过大的问题

使用方法二备份时，如果你用的是 64GB 的卡，生成的镜像文件就是 64GB（即使你只用了 5GB 空间）。这非常占用电脑硬盘。  
使用压缩软件最简单有效的方法。`.img` 文件中未使用的空间通常是全 0 或无意义数据，压缩率极高。

1.  完成方法二的备份，得到巨大的 `.img` 文件。
2.  安装 **7-Zip** 或 **WinRAR**。
3.  右键点击镜像文件 -> **添加到压缩包**。
4.  **效果**：一个 32GB 的镜像文件，压缩后通常只有 **2GB - 4GB**。

-----

## NVMe SSD 备份

树莓派 5 支持通过 PCIe 接口连接 M.2 NVMe SSD。如果你把系统装在 SSD 上：

1.  **方法一（SD Card Copier）依然适用**：你可以把 SSD 的系统克隆回 SD 卡作为备份。
2.  **方法二（Win32 Disk Imager）较难操作**：因为 M.2 硬盘盒拔插不便。
3.  **命令行备份（dd）**：
    如果你熟悉 Linux，可以在系统运行时使用 `dd` 命令将 SSD 备份到挂载的 NAS 或大容量 USB 盘中：
    ```bash
    # 示例：将 nvme0n1 备份为镜像文件（需谨慎操作）
    sudo dd if=/dev/nvme0n1 of=/mnt/usb_drive/backup.img bs=4M status=progress
    ```

-----

## 如何恢复备份？

当你的系统崩溃了，或者买了一张新卡想要还原之前的系统：

1.  打开 **Win32 Disk Imager**（或者官方的 **Raspberry Pi Imager**）。
2.  **镜像文件**：选择你之前备份的 `.img` 文件（如果是压缩包，需先解压）。
3.  **设备**：选择新的 SD 卡。
4.  点击 **写入 (Write)**。
5.  等待写入完成，插回树莓派即可复活。

-----

## 总结建议

*   **日常折腾前**：用方法一，插个 U 盘快速克隆一份，随时能救急。
*   **阶段性保存**：用方法二，存到电脑里，并用 7-Zip 压缩归档，标注好日期。

