---
slug: pi-site-2
title: react-site-公网访问配置
authors: [tamochi]
---

在上一篇文章中，我们已经在树莓派上成功搭建了一个基于 React 的网站。接下来，我们将配置公网访问，使得外部用户可以通过互联网访问我们的网站。由于树莓派通常位于家庭网络的内网中，我们将使用 Cloudflare Tunnel 来实现这一目标。

<!-- truncate -->
## React程序配置

默认的`npm run dev`命令启动的开发服务器仅适用于本地访问，我们可以用下面更细致的命令来指定服务器的监听地址和端口：

```shell
npm run dev -- --host 0.0.0.0 --port 3000
```

这将使服务器监听所有网络接口的3000端口，从而允许局域网内的其他设备访问。

在vite.config.ts中，还需要添加以下配置，以允许跨域访问：

```typescript
export default defineConfig({
  plugins: [react()],
  //添加的配置
  server: {
    allowedHosts: ['{your-domain.com}'],
  },
  //添加的配置
})
```

## 安装 Cloudflare Tunnel

在 cloudflare 里的 zero trust 里创建一个 tunnel，参考官方文档：[Cloudflare Tunnel 文档](https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/tunnel-guide/)。

根据要求选择 Linux 版本并安装 `cloudflared`。

![如图](https://pic.tamochi.cn/i/2025/11/20/691e8a2122fcd.png)

## 发布应用程序路由

主机名自行配置，服务类型选择`http`，目标地址填写`127.0.0.1:3000`，然后保存。接下来访问自己配置的主机名即可访问到树莓派上的 React 网站。