---
sidebar_position: 1
---
# Docker å®‰è£…æŒ‡å—

ç”±äº Docker å®˜æ–¹ä»“åº“ (`download.docker.com`) åœ¨å›½å†…è®¿é—®æä¸ç¨³å®šï¼Œæœ¬æ•™ç¨‹å…¨ç¨‹é‡‡ç”¨ **é˜¿é‡Œäº‘ (Aliyun)** é•œåƒæºè¿›è¡Œå®‰è£…ï¼Œç¡®ä¿ä¸‹è½½é€Ÿåº¦å¿«ä¸”æˆåŠŸç‡é«˜ã€‚

> **â„¹ï¸ ä¿¡æ¯**  
> **é€‚ç”¨ç³»ç»Ÿï¼š** Ubuntu 18.04/20.04/22.04/24.04 åŠ Debian 10/11/12  
> **æƒé™è¦æ±‚ï¼š** è¯·ä½¿ç”¨ `root` ç”¨æˆ·æˆ–å…·æœ‰ `sudo` æƒé™çš„è´¦å·ã€‚

## ç¯å¢ƒæ¸…ç†

åœ¨å®‰è£…æ–°ç‰ˆæœ¬å‰ï¼Œå»ºè®®æ¸…ç†ç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨çš„æ—§ç‰ˆæœ¬æˆ–å†²çªåŒ…ã€‚

```bash
for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do 
    sudo apt-get remove $pkg; 
done
```

## å®‰è£… Docker Engine

æˆ‘ä»¬æä¾›ä¸¤ç§æ–¹æ¡ˆï¼Œæ¨èä½¿ç”¨æ–¹æ¡ˆ Aï¼ˆå®˜æ–¹è„šæœ¬+å›½å†…å‚æ•°ï¼‰ï¼Œç®€å•ä¸”å…¼å®¹æ€§æœ€å¥½ã€‚

### æ–¹æ¡ˆ Aï¼šä¸€é”®è„šæœ¬å®‰è£… (æ¨è)

ä½¿ç”¨ Docker å®˜æ–¹å®‰è£…è„šæœ¬ï¼Œå¹¶é€šè¿‡ `--mirror` å‚æ•°æŒ‡å®šä½¿ç”¨é˜¿é‡Œäº‘é•œåƒæºã€‚

```bash
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
```

> **âš ï¸ æ³¨æ„**  
> å¦‚æœä¸åŠ  `--mirror Aliyun`ï¼Œè„šæœ¬ä¼šå°è¯•è¿æ¥å®˜æ–¹æºï¼Œæå¤§æ¦‚ç‡ä¼šè¶…æ—¶å¤±è´¥ã€‚

### æ–¹æ¡ˆ Bï¼šæ‰‹åŠ¨æ·»åŠ é˜¿é‡Œäº‘æºå®‰è£…

å¦‚æœè„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨é…ç½®è½¯ä»¶æºï¼š

1.  **å®‰è£…å¿…è¦å·¥å…·ï¼š**

    ```bash
    sudo apt-get update
    sudo apt-get install -y ca-certificates curl gnupg
    ```

2.  **é…ç½®é˜¿é‡Œäº‘ GPG å¯†é’¥ï¼š**

    ```bash
    sudo install -m 0755 -d /etc/apt/keyrings
    curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
    sudo chmod a+r /etc/apt/keyrings/docker.gpg
    ```

    *(æ³¨ï¼šDebian ç”¨æˆ·å¦‚æœæŠ¥é”™ï¼Œè¯·å°†å‘½ä»¤ä¸­çš„ `ubuntu` æ”¹ä¸º `debian`)*

3.  **å†™å…¥è½¯ä»¶æºåˆ—è¡¨ï¼š**

    ```bash
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.aliyun.com/docker-ce/linux/$(. /etc/os-release && echo "$ID") \
      $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
      sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
    ```

4.  **æ›´æ–°å¹¶å®‰è£…ï¼š**

    ```bash
    sudo apt-get update
    sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
    ```

## å…³é”®é…ç½®ï¼šé•œåƒåŠ é€Ÿä¸ä»£ç†

å®‰è£…å®Œæˆåï¼Œå¿…é¡»é…ç½®å›½å†…é•œåƒåŠ é€Ÿï¼Œå¦åˆ™æ‹‰å–é•œåƒï¼ˆå¦‚ `docker pull`ï¼‰ä¼šæå…¶ç¼“æ…¢æˆ–è¶…æ—¶ã€‚

ç¼–è¾‘ Docker é…ç½®æ–‡ä»¶ï¼š

```bash
sudo mkdir -p /etc/docker
sudo nano /etc/docker/daemon.json
```

å°†ä»¥ä¸‹å†…å®¹å†™å…¥æ–‡ä»¶ã€‚è¿™é‡Œæä¾›äº†ä¸€ä»½**ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®**ï¼ˆåŒ…å«é•œåƒåŠ é€Ÿ + å±€åŸŸç½‘ HTTP ä»£ç†é…ç½®ç¤ºä¾‹ï¼‰ï¼š

```json filename="/etc/docker/daemon.json"
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://hub.rat.dev"
  ],
  "proxies": {
    "http-proxy": "http://127.0.0.1:7999",
    "https-proxy": "http://127.0.0.1:7999",
    "no-proxy": "localhost,127.0.0.1,::1,192.168.0.0/16,10.0.0.0/8,172.16.0.0/12"
  }
}
```

> **ğŸ›‘ è­¦å‘Š**  
> **æ³¨æ„ï¼š**  
> 1. `proxies` å­—æ®µæ˜¯å¯é€‰çš„ã€‚å¦‚æœä½ æ²¡æœ‰ HTTP ä»£ç†ï¼Œ**è¯·åˆ é™¤æ•´ä¸ª proxies å—**ï¼Œå¦åˆ™ Docker ä¼šè¿ä¸ä¸Šç½‘ã€‚  
> 2. å¦‚æœä½¿ç”¨ä»£ç†ï¼Œè¯·åŠ¡å¿…å°† `127.0.0.1:7999` æ›¿æ¢ä¸ºä½ ä½¿ç”¨çš„ä»£ç†ç«¯å£ã€‚

ä¿å­˜æ–‡ä»¶åï¼Œé‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl restart docker
```

## é Root ç”¨æˆ·æƒé™é…ç½® (å¯é€‰)

å¦‚æœä½ å¸Œæœ›åœ¨æ™®é€šç”¨æˆ·ï¼ˆå¦‚ `ubuntu`ï¼‰ä¸‹ç›´æ¥è¿è¡Œ docker å‘½ä»¤ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½è¾“ `sudo`ï¼š

```bash
sudo usermod -aG docker $USER
newgrp docker
```

## éªŒè¯å®‰è£…

è¿è¡Œ Hello World å®¹å™¨æ¥éªŒè¯ä¸€åˆ‡æ˜¯å¦æ­£å¸¸ã€‚

```bash
docker run --rm hello-world
```

**éªŒè¯æ ‡å‡†ï¼š**

1.  çœ‹åˆ° `Unable to find image...` åï¼Œä¸‹è½½è¿›åº¦æ¡èµ°å¾—å¾ˆå¿«ï¼ˆè¯´æ˜**é•œåƒåŠ é€Ÿ**ç”Ÿæ•ˆï¼‰ã€‚
2.  è¾“å‡º `Hello from Docker!`ï¼ˆè¯´æ˜**æœåŠ¡è¿è¡Œ**æ­£å¸¸ï¼‰ã€‚

-----

## å¸¸ç”¨å‘½ä»¤

```shell
docker -v               # æŸ¥çœ‹ Docker ç‰ˆæœ¬
docker compose version  # æŸ¥çœ‹ Docker Compose ç‰ˆæœ¬
docker ps               # æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps -a            # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰
docker exec -it <å®¹å™¨å> bash  # è¿›å…¥æŒ‡å®šå®¹å™¨çš„ bash
docker logs -f <å®¹å™¨å>         # æŸ¥çœ‹æŒ‡å®šå®¹å™¨æ—¥å¿—
docker system prune -a  # æ¸…ç†æ— ç”¨æ•°æ®ï¼Œé‡Šæ”¾ç©ºé—´
```